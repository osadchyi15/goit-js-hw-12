{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\n\nconst refs = {\nimageSearchForm: document.querySelector('.search-form'),\nimageSearchInput: document.querySelector('.search-input'),\nsubmitButton: document.querySelector('.search-btn'),\nimageList: document.querySelector('.images-list'),\n}\n\nfunction imagesTemplate(image) {\n\n    return `<li class=\"images-list-item\">\n  <a class=\"img-link\" href=${image.largeImageURL} onclick=\"event.preventDefault()\"><img class=\"img\" src=${image.webformatURL} alt=${image.tags}></img></a>\n   <ul class=\"img-dscr\">\n      <li class=\"img-data\">\n        <p class=\"img-data-title\">Likes</p>\n        <p class=\"img-data-numbers\">${image.likes}</p>\n      </li>\n      <li class=\"img-data\">\n        <p class=\"img-data-title\">Views</p>\n        <p class=\"img-data-numbers\">${image.views}</p>\n      </li>\n      <li class=\"img-data\">\n        <p class=\"img-data-title\">Comments</p>\n        <p class=\"img-data-numbers\">${image.comments}</p>\n      </li>\n      <li class=\"img-data\">\n        <p class=\"img-data-title\">Downloads</p>\n        <p class=\"img-data-numbers\">${image.downloads}</p>\n      </li>\n    </ul>\n</li>`;\n  }\n   \n    export function renderImages(images) {\n      return images.map(imagesTemplate).join('\\n');   \n    }\n   \n\n\n","'use strict';\nimport axios from \"axios\";\n\nexport async function getImages(request, page, per_page) {\n    try {\n        const imagesApi = axios.create({\n            baseURL: 'https://pixabay.com',\n        })   \n           const res = await imagesApi.get('/api/', {\n               params: {\n                key: '44319460-4af2fb7eeaa8b0840083a4a49',\n                q: request,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: per_page,\n            }\n           })\n            \n             return res.data;\n    } catch (error) {\n        console.log(enterError('','api get error'));\n    };\n}","'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { renderImages } from \"./js/render-functions\";\nimport { getImages } from \"./js/pixabay-api\";\n\nconst refs = {\n    imageSearchForm: document.querySelector('.search-form'),\n    imageSearchInput: document.querySelector('.search-input'),\n    submitButton: document.querySelector('.search-btn'),\n    imageList: document.querySelector('.images-list'),\n    loader: document.querySelector('.loader'),\n    more: document.querySelector('.more-button'),\n}\n\nlet request;\nlet page = 1;\nlet maxPage = 1;\nconst per_page = 15;\n\nrefs.imageSearchForm.addEventListener('submit', async e => {\n    e.preventDefault();\n  \n    request = e.target.elements.userData.value.trim();\n    page = 1;\n\n        if (!request) {\n            refs.imageList.innerHTML = '';\n            hideMoreBtn();\n            hideLoader();\n        return iziToast.info({\n            message: 'You need to enter search request!',\n            position: 'topRight',\n            transitionIn: 'bounceInDown',\n            transitionOut: 'fadeOutDown',\n        });\n        }\n        \n    showLoader();\n    hideMoreBtn();\n\n    const data = await getImages(request, page, per_page);\n     if (data.hits.length === 0) {\n         refs.imageList.innerHTML = '';\n         hideLoader();\n            return iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                transitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n            });\n        }\n   \n    const markup = renderImages(data.hits);\n    refs.imageList.innerHTML = markup;\n\n    maxPage = Math.ceil(data.totalHits / per_page);\n\n\nconst lightbox = new SimpleLightbox('.images-list-item a', {\n                        captions: true,\n                        captionSelector: 'img',\n                        captionType: 'attr',\n                        captionsData: 'alt',\n                        captionPosition: 'bottom',\n                        captionDelay: 250,\n                        animationSpeed: 300,\n                        widthRatio: 1,\n                        heightRatio: 0.95,\n                        disableRightClick: true,\n                    });\n    lightbox.refresh();\n     \n    checkBtnStatus();\n    hideLoader();\n\n    e.target.reset();\n   });\n    \n  \n\nrefs.more.addEventListener('click', async () => {\n    page++;\n    showLoader();\n    hideMoreBtn();\n    const data = await getImages(request, page, per_page);\n    const markup = renderImages(data.hits);\n    refs.imageList.insertAdjacentHTML('beforeend', markup);\n    \n    skipPrewElem();\n    \n    const lightbox = new SimpleLightbox('.images-list-item a', {\n            captions: true,\n            captionSelector: 'img',\n            captionType: 'attr',\n            captionsData: 'alt',\n            captionPosition: 'bottom',\n            captionDelay: 250,\n            animationSpeed: 300,\n            widthRatio: 1,\n            heightRatio: 0.95,\n            disableRightClick: true,\n        });\n        lightbox.refresh();\n\n        checkBtnStatus(page, maxPage);\n    hideLoader();\n    console.log(page, maxPage);\n})\n    \n\n  \nfunction checkBtnStatus(page, maxPage) {\n          if (page >= maxPage) {\n        hideMoreBtn();\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            transitionIn: 'bounceInDown',\n            transitionOut: 'fadeOutDown',\n        });\n    } else {\n        showMoreBtn();\n    }\n}\n \nfunction showMoreBtn() {\n    refs.more.classList.remove('hidden');\n};\n\nfunction hideMoreBtn() {\n     refs.more.classList.add('hidden');\n};\n\nfunction showLoader() {\n    refs.loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    refs.loader.style.display = 'none';\n}\n\nfunction skipPrewElem() {\n    const height = refs.imageList.children[0].getBoundingClientRect().height;\n\n    scrollBy({\n        top: height * 3 + 48,\n        behavior: 'smooth',\n    })\n    }\n"],"names":["imagesTemplate","image","renderImages","images","getImages","request","page","per_page","axios","refs","maxPage","hideMoreBtn","hideLoader","iziToast","showLoader","data","markup","SimpleLightbox","checkBtnStatus","skipPrewElem","showMoreBtn","height"],"mappings":"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"}